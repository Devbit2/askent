(this["webpackJsonpaskent-client"]=this["webpackJsonpaskent-client"]||[]).push([[19],{265:function(e,t,n){"use strict";function a(e,t){return Object.prototype.hasOwnProperty.call(t,e)}n.d(t,"a",(function(){return a}))},300:function(e,t,n){"use strict";n(1);var a=n(423),r=n(461),i=n(636),c=n(192),s=n(158),o=n(322),l=n.n(o),u=n(8),d=Object(c.a)((function(e){return Object(s.a)({dialogTitle:{display:"flex",justifyContent:"space-between",alignItems:"center"}})}));t.a=function(e){var t=e.title,n=e.onClose,c=d();return Object(u.jsxs)(a.a,{disableTypography:!0,className:c.dialogTitle,children:[Object(u.jsx)(r.a,{variant:"subtitle1",color:"textSecondary",children:t}),Object(u.jsx)(i.a,{onClick:n,size:"small",children:Object(u.jsx)(l.a,{color:"inherit",fontSize:"small"})})]})}},301:function(e,t,n){"use strict";var a=n(46),r=Object(a.a)((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));t.a=r},385:function(e,t,n){"use strict";var a=n(45),r=n(101),i=n.n(r),c=n(119),s=n(117),o=n(44),l=n(1),u=n.n(l),d=n(640),j=n(642),b=n(671),f=n(647),p=n(351),v=n(643),h=n(462),O=n(192),m=n(158),x=n(72),g=n(262),y=n(280),w=n(244),M=n(253),k=n(663),C=n(247),A=n(300),E=n(245),S=n(125),I=n(246),N=n(645),F=n(375),L=n(636),_=n(251),B=n(389),z=n(383),R=n.n(z),D=n(436),T=n.n(D),H=n(437),P=n.n(H),W=n(461),V=n(191),G=n(570),q=n(435),U=n.n(q),Q=n(434),K=n.n(Q),Y=n(8),J=Object(O.a)((function(e){return Object(m.a)({collapseList:{},item:{marginBottom:e.spacing(2)},head:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},title:{display:"flex",alignItems:"center",color:e.palette.primary.main},titleText:{fontWeight:e.typography.fontWeightBold,marginLeft:e.spacing(1)},body:{paddingLeft:32,marginBottom:e.spacing(2)}})})),X=function(e){var t=e.list,n=e.defaultActiveKey,a=void 0===n?[]:n,r=J(),i=u.a.useState(a),c=Object(o.a)(i,2),s=c[0],l=c[1];return Object(Y.jsx)(p.a,{className:r.collapseList,children:t.map((function(e,t){return Object(Y.jsxs)(p.a,{className:r.item,children:[Object(Y.jsxs)(p.a,{className:r.head,onClick:function(e){return function(e){l(s.includes(e)?s.filter((function(t){return t!==e})):s.concat([e]))}(t)},children:[Object(Y.jsxs)("div",{className:r.title,children:[u.a.cloneElement(e.titleIcon,{color:"inherit"}),Object(Y.jsx)(W.a,{variant:"h6",color:"inherit",className:r.titleText,children:e.titleText})]}),s.includes(t)?Object(Y.jsx)(K.a,{color:"inherit",fontSize:"small"}):Object(Y.jsx)(U.a,{color:"inherit",fontSize:"small"})]}),Object(Y.jsx)(V.a,{className:r.body,in:s.includes(t),children:e.body}),Object(Y.jsx)(G.a,{})]},t)}))})},Z=n(382),$=n.n(Z),ee=Object(O.a)((function(e){return Object(m.a)({basicInfoField:{width:"70%"},dateRange:{display:"flex",justifyContent:"space-between","& > *":{width:"47%"}}})})),te=function(e){var t=e.defaultFocus,n=void 0===t?"name":t,a=ee(),r=Object(g.a)().formatMessage,i=u.a.useRef(null),c=u.a.useState(!1),s=Object(o.a)(c,2),l=s[0],d=s[1];return Object(Y.jsx)(X,{list:[{titleIcon:Object(Y.jsx)(T.a,{}),titleText:Object(Y.jsx)(y.a,{id:"Basic_information",defaultMessage:"Basic information"}),body:Object(Y.jsxs)(p.a,{className:a.basicInfoField,children:[Object(Y.jsx)(w.a,{component:_.c,fullWidth:!0,autoFocus:"name"===n,name:"name",label:r({id:"Event_name",defaultMessage:"Event name"}),margin:"normal",size:"small"}),Object(Y.jsxs)(p.a,{className:a.dateRange,children:[Object(Y.jsx)(w.a,{component:B.a,autoFocus:"startAt"===n,name:"startAt",label:r({id:"Start_datetime",defaultMessage:"Start date time"}),variant:"inline",margin:"normal",size:"small",autoOk:!0,disableToolbar:!0}),Object(Y.jsx)(w.a,{component:B.a,autoFocus:"endAt"===n,name:"endAt",label:r({id:"End_datetime",defaultMessage:"End date time"}),variant:"inline",margin:"normal",size:"small",autoOk:!0,disableToolbar:!0})]}),Object(Y.jsx)(w.a,{component:_.c,fullWidth:!0,autoFocus:"code"===n,name:"code",label:r({id:"Event_code",defaultMessage:"Event code"}),margin:"normal",size:"small"}),Object(Y.jsx)(w.a,{component:_.c,inputRef:i,fullWidth:!0,autoFocus:"eventLink"===n,name:"eventLink",label:r({id:"Event_link",defaultMessage:"Event link"}),size:"small",InputProps:{readOnly:!0,endAdornment:Object(Y.jsx)(N.a,{position:"end",children:Object(Y.jsx)(F.a,{arrow:!0,placement:"right",leaveDelay:3e3,title:r(l?{id:"Copied!",defaultMessage:"Copied!"}:{id:"Copy to clipboard",defaultMessage:"Copy to clipboard"}),children:Object(Y.jsx)(L.a,{size:"small",onClick:function(){var e,t;null===(e=i.current)||void 0===e||e.focus(),null===(t=i.current)||void 0===t||t.select();try{var n;i.current&&$()(null===(n=i.current)||void 0===n?void 0:n.value)&&(d(!0),window.setTimeout((function(){return d(!1)}),3e3))}catch(a){console.log(a)}},children:Object(Y.jsx)(R.a,{fontSize:"inherit",color:"inherit"})})})})},onFocus:function(){var e;null===(e=i.current)||void 0===e||e.select()}})]})},{titleIcon:Object(Y.jsx)(P.a,{}),titleText:Object(Y.jsx)(y.a,{id:"Security",defaultMessage:"Security"}),body:Object(Y.jsx)(p.a,{})}],defaultActiveKey:[0]})},ne=n(269),ae=n.n(ne),re=Object(O.a)((function(e){return Object(m.a)({switchItem:{display:"flex",justifyContent:"space-between",alignItems:"center"}})})),ie=function(e){var t=e.label,n=e.description,a=e.switchField,r=re();return Object(Y.jsxs)("div",{className:r.switchItem,children:[Object(Y.jsxs)("div",{children:[Object(Y.jsx)(W.a,{variant:"body1",children:t}),Object(Y.jsx)(W.a,{variant:"body2",color:"textSecondary",children:n})]}),a]})},ce=function(){return Object(Y.jsx)(X,{list:[{titleIcon:Object(Y.jsx)(ae.a,{}),titleText:Object(Y.jsx)(y.a,{id:"Audience_Q&A",defaultMessage:"Audience Q&A"}),body:Object(Y.jsx)(u.a.Fragment,{children:Object(Y.jsx)(ie,{label:Object(Y.jsx)(y.a,{id:"Moderation",defaultMessage:"Moderation"}),description:Object(Y.jsx)(y.a,{id:"Easily review all questions before they go live.",defaultMessage:"Easily review all questions before they go live."}),switchField:Object(Y.jsx)(w.a,{component:_.b,type:"checkbox",name:"moderation"})})})}]})},se=n(657),oe=n(658),le=n(659),ue=n(660),de=n(661),je=n(662),be=n(638),fe=n(423),pe=n(424),ve=n(439),he=n.n(ve),Oe=n(272),me=Object(O.a)((function(e){return Object(m.a)({removeButton:{color:e.palette.text.secondary}})})),xe=function(e){var t=e.eventId,n=e.eventData,a=me(),r=u.a.useState(!1),c=Object(o.a)(r,2),l=c[0],d=c[1],j=u.a.useState(""),b=Object(o.a)(j,2),f=b[0],v=b[1],O=Object(E.t)({variables:{eventId:t}}),m=O.data,x=O.loading,g=O.refetch,w=Object(E.B)(),M=Object(o.a)(w,2),k=M[0],C=M[1].loading,A=function(){v("")},S=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({variables:{eventId:t,guestId:f}});case 2:g(),A();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Y.jsxs)(u.a.Fragment,{children:[Object(Y.jsx)(p.a,{display:"flex",justifyContent:"flex-end",children:Object(Y.jsx)(h.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){d(!0)},children:Object(Y.jsx)(y.a,{id:"Add guest",defaultMessage:"Add guest"})})}),Object(Y.jsx)(se.a,{children:Object(Y.jsxs)(oe.a,{size:"small",children:[Object(Y.jsx)(le.a,{children:Object(Y.jsxs)(ue.a,{children:[Object(Y.jsx)(de.a,{children:Object(Y.jsx)(y.a,{id:"Name",defaultMessage:"Name"})}),Object(Y.jsx)(de.a,{align:"right",children:Object(Y.jsx)(y.a,{id:"Email",defaultMessage:"Email"})}),Object(Y.jsx)(de.a,{align:"right",children:Object(Y.jsx)(y.a,{id:"Actions",defaultMessage:"Actions"})})]})}),Object(Y.jsx)(je.a,{children:null===m||void 0===m?void 0:m.eventById.guestes.map((function(e,t){return Object(Y.jsxs)(ue.a,{children:[Object(Y.jsx)(de.a,{component:"th",scope:"row",children:e.name}),Object(Y.jsx)(de.a,{align:"right",children:e.email}),Object(Y.jsx)(de.a,{align:"right",children:Object(Y.jsx)(L.a,{size:"small",className:a.removeButton,onClick:function(t){return n=e.id,void v(n);var n},children:Object(Y.jsx)(he.a,{fontSize:"inherit",color:"inherit"})})})]},t)}))})]})}),x&&Object(Y.jsx)(be.a,{}),Object(Y.jsx)(ge,{open:l,eventId:t,eventData:n,handleClose:function(e){e&&g(),d(!1)}}),Object(Y.jsx)(Oe.a,{open:Boolean(f),loading:C,contentText:Object(Y.jsx)(y.a,{id:"Remove_this_guest?",defaultMessage:"Remove this guest?"}),okText:Object(Y.jsx)(y.a,{id:"Remove",defaultMessage:"Remove"}),onCancel:A,onOk:S})]})},ge=function(e){var t=e.open,n=e.eventId,a=e.eventData,r=e.handleClose,l=Object(E.f)(),u=Object(o.a)(l,2),b=u[0],f=u[1],p=f.data,O=f.loading,m=Object(E.e)(),x=Object(o.a)(m,2),g=x[0],k=x[1].loading,A=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,e.prev=1,e.next=4,M.b({email:M.c().max(I.g).email().required()}).validate({email:n});case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),r=e.t0,s=r.path,o=r.errors,console.error(s,o),e.abrupt("return",Object(c.a)({},s,o[0]));case 11:if(n!==(null===a||void 0===a?void 0:a.eventById.owner.email)){e.next=13;break}return e.abrupt("return",{email:"Can't add event owner as guest"});case 13:return e.next=15,b({variables:{email:n}});case 15:if(null===p||void 0===p?void 0:p.checkEmailExist){e.next=17;break}return e.abrupt("return",{email:"User with this eamil does not exist"});case 17:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,e.next=3,g({variables:{eventId:n,email:a}});case 3:r(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Y.jsxs)(d.a,{open:t,onClose:function(e){return r()},children:[Object(Y.jsx)(fe.a,{children:Object(Y.jsx)(y.a,{id:"Add guest",defaultMessage:"Add guest"})}),Object(Y.jsx)(w.c,{initialValues:{email:""},validate:A,onSubmit:S,children:Object(Y.jsxs)(w.b,{children:[Object(Y.jsxs)(j.a,{children:[Object(Y.jsx)(pe.a,{children:Object(Y.jsx)(y.a,{id:"Add a user as guest administrator, who can cooperating manage this event with you.",defaultMessage:"Add a user as guest administrator, who can cooperating manage this event with you."})}),Object(Y.jsx)(w.a,{component:_.c,autoFocus:!0,fullWidth:!0,name:"email",label:Object(Y.jsx)(y.a,{id:"User email",defaultMessage:"User email"}),type:"email"})]}),Object(Y.jsxs)(v.a,{children:[Object(Y.jsx)(h.a,{onClick:function(e){return r()},children:Object(Y.jsx)(y.a,{id:"Cancel",defaultMessage:"Cancel"})}),Object(Y.jsx)(C.a,{type:"submit",variant:"contained",color:"primary",style:{width:100},loading:O||k,children:Object(Y.jsx)(y.a,{id:"Add",defaultMessage:"Add"})})]})]})})]})},ye=[Object(Y.jsx)(y.a,{id:"General",defaultMessage:"General"}),Object(Y.jsx)(y.a,{id:"Guestes",defaultMessage:"Guestes"}),Object(Y.jsx)(y.a,{id:"Features",defaultMessage:"Features"}),Object(Y.jsx)(y.a,{id:"Customization",defaultMessage:"Customization"}),Object(Y.jsx)(y.a,{id:"Integrations",defaultMessage:"Integrations"}),Object(Y.jsx)(y.a,{id:"Share_access",defaultMessage:"Share access"})],we=function(e){var t=e.index,n=e.defaultFocus,a=void 0===n?"name":n,r=e.eventId,i=e.eventData;return[Object(Y.jsx)(te,{defaultFocus:a}),Object(Y.jsx)(xe,{eventId:r,eventData:i}),Object(Y.jsx)(ce,{}),Object(Y.jsx)("div",{children:"Item Customization"}),Object(Y.jsx)("div",{children:"Item Integrations"}),Object(Y.jsx)("div",{children:"Item Share_access"})][t]},Me=Object(O.a)((function(e){return Object(m.a)({paper:{overflowY:"hidden"},form:{display:"flex",flexDirection:"column",overflow:"hidden"},dialogContent:{display:"flex",overflowY:"hidden"},tabs:{width:200,borderRight:"1px solid ".concat(e.palette.divider)},tabRoot:{paddingRight:e.spacing(2)},tabWrapper:{alignItems:"flex-end"},contentRightBox:{width:680,height:"100%",maxHeight:420,overflowY:"auto",marginLeft:e.spacing(2),paddingLeft:50,paddingRight:50,position:"relative","&:before":{content:"' '",display:"block",position:"sticky",top:0,left:0,width:"100%",height:12,pointerEvents:"none",background:"linear-gradient(to top, ".concat(Object(x.a)(e.palette.background.paper,0)," 0%, ").concat(e.palette.background.paper," 100%)")},"&:after":{content:"' '",display:"block",position:"sticky",bottom:0,left:0,width:"100%",height:12,pointerEvents:"none",background:"linear-gradient(to bottom, ".concat(Object(x.a)(e.palette.background.paper,0)," 0%, ").concat(e.palette.background.paper," 100%)")}}})}));t.a=function(e){var t=e.defaultFocus,n=void 0===t?"name":t,r=e.eventIdState,l=e.onExiting,O=Me(),m=Object(g.a)().formatMessage,x=Object(S.b)().enqueueSnackbar,N=Object(o.a)(r,2),F=N[0],L=N[1],_=u.a.useState(0),B=Object(o.a)(_,2),z=B[0],R=B[1],D=Object(E.p)(),T=Object(o.a)(D,2),H=T[0],P=T[1],W=P.data,V=P.loading,G=Object(E.g)(),q=Object(o.a)(G,2),U=q[0],Q=q[1],K=Q.data,J=Q.loading,X=Object(E.D)(),Z=Object(o.a)(X,2),$=Z[0],ee=Z[1].loading;u.a.useEffect((function(){F&&H({variables:{eventId:F}})}),[F]);var te=function(){L(""),R(0),l&&l("cancel")},ne={name:(null===W||void 0===W?void 0:W.eventById.name)||"",code:(null===W||void 0===W?void 0:W.eventById.code)||"",startAt:new Date(null===W||void 0===W?void 0:W.eventById.startAt),endAt:new Date(null===W||void 0===W?void 0:W.eventById.endAt),eventLink:"".concat(window.location.origin,"/event/").concat(null===W||void 0===W?void 0:W.eventById.id),moderation:null===W||void 0===W?void 0:W.eventById.moderation},ae=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,a,r,s,o,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.code,r=t.startAt,s=t.endAt,e.prev=1,e.next=4,M.b({name:M.c().max(I.d).required(),code:M.c().max(I.c).required(),startAt:M.a(),endAt:M.a()}).validate({name:n,code:a,startAt:r,endAt:s});case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),o=e.t0,l=o.path,u=o.errors,console.error(l,u),e.abrupt("return",Object(c.a)({},l,u[0]));case 11:if(!(s<r)){e.next=13;break}return e.abrupt("return",{endAt:m({id:"End_must_after_start",defaultMessage:"End must after start"})});case 13:if(a===ne.code){e.next=18;break}return e.next=16,U({variables:{code:a}});case 16:if(!(null===K||void 0===K?void 0:K.checkEventCodeExist)){e.next=18;break}return e.abrupt("return",{code:m({id:"Code_existed",defaultMessage:"Code existed"})});case 18:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$({variables:{input:k.a(["eventLink"],Object(a.a)({eventId:F},t))}});case 2:n=e.sent,n.data&&(x(m({id:"Event_updated",defaultMessage:"Event updated"}),{variant:"success"}),te());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Y.jsxs)(d.a,{classes:{paper:O.paper},maxWidth:"lg",open:Boolean(F),onClose:te,children:[Object(Y.jsx)(A.a,{title:Object(Y.jsx)(y.a,{id:"Event_settings",defaultMessage:"Event settings"}),onClose:te}),Object(Y.jsx)(w.c,{enableReinitialize:!0,initialValues:ne,validate:ae,onSubmit:re,children:Object(Y.jsxs)(w.b,{className:O.form,children:[Object(Y.jsxs)(j.a,{className:O.dialogContent,children:[Object(Y.jsx)(b.a,{orientation:"vertical",variant:"scrollable",className:O.tabs,value:z,onChange:function(e,t){R(t)},children:ye.map((function(e,t){return Object(Y.jsx)(f.a,{classes:{root:O.tabRoot,wrapper:O.tabWrapper},label:e},t)}))}),Object(Y.jsx)(p.a,{className:O.contentRightBox,children:Object(Y.jsx)(we,{index:z,defaultFocus:n,eventId:F,eventData:W})})]}),Object(Y.jsxs)(v.a,{children:[Object(Y.jsx)(h.a,{onClick:te,children:Object(Y.jsx)(y.a,{id:"Cancel",defaultMessage:"Cancel"})}),Object(Y.jsx)(C.a,{variant:"contained",color:"primary",style:{width:100},type:"submit",loading:V||ee||J,children:Object(Y.jsx)(y.a,{id:"Save",defaultMessage:"Save"})})]})]})})]})}},565:function(e,t,n){"use strict";var a=n(5),r=n(16),i=n(1),c=(n(22),n(38)),s=n(51),o=n(99),l=i.forwardRef((function(e,t){var n=e.classes,s=e.className,l=e.color,u=void 0===l?"default":l,d=e.component,j=void 0===d?"li":d,b=e.disableGutters,f=void 0!==b&&b,p=e.disableSticky,v=void 0!==p&&p,h=e.inset,O=void 0!==h&&h,m=Object(r.a)(e,["classes","className","color","component","disableGutters","disableSticky","inset"]);return i.createElement(j,Object(a.a)({className:Object(c.a)(n.root,s,"default"!==u&&n["color".concat(Object(o.a)(u))],O&&n.inset,!v&&n.sticky,!f&&n.gutters),ref:t},m))}));t.a=Object(s.a)((function(e){return{root:{boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},colorPrimary:{color:e.palette.primary.main},colorInherit:{color:"inherit"},gutters:{paddingLeft:16,paddingRight:16},inset:{paddingLeft:72},sticky:{position:"sticky",top:0,zIndex:1,backgroundColor:"inherit"}}}),{name:"MuiListSubheader"})(l)},566:function(e,t,n){"use strict";var a=n(241),r=n(242);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),c=(0,a(n(243)).default)(i.createElement("path",{d:"M16.53 11.06L15.47 10l-4.88 4.88-2.12-2.12-1.06 1.06L10.59 17l5.94-5.94zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"}),"EventAvailable");t.default=c},567:function(e,t,n){"use strict";var a=n(241),r=n(242);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),c=(0,a(n(243)).default)(i.createElement("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Event");t.default=c},568:function(e,t,n){"use strict";var a=n(241),r=n(242);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),c=(0,a(n(243)).default)(i.createElement("path",{d:"M9.31 17l2.44-2.44L14.19 17l1.06-1.06-2.44-2.44 2.44-2.44L14.19 10l-2.44 2.44L9.31 10l-1.06 1.06 2.44 2.44-2.44 2.44L9.31 17zM19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"}),"EventBusy");t.default=c},569:function(e,t,n){"use strict";var a=n(241),r=n(242);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),c=(0,a(n(243)).default)(i.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.default=c},668:function(e,t,n){"use strict";n.r(t),n.d(t,"getEventDateFilterLabel",(function(){return Xe}));var a=n(44),r=n(1),i=n.n(r),c=n(351),s=n(672),o=n(377),l=n(462),u=n(192),d=n(158),j=n(280),b=n(245),f=n(101),p=n.n(f),v=n(119),h=n(117),O=n(640),m=n(423),x=n(642),g=n(643),y=n(262),w=n(244),M=n(253),k=n(247),C=n(109),A=n(76),E=n(4),S=n(3),I=n(7);function N(e,t){if(Object(S.a)(2,arguments),!t||"object"!==typeof t)return new Date(NaN);var n=t.years?Object(I.a)(t.years):0,a=t.months?Object(I.a)(t.months):0,r=t.weeks?Object(I.a)(t.weeks):0,i=t.days?Object(I.a)(t.days):0,c=t.hours?Object(I.a)(t.hours):0,s=t.minutes?Object(I.a)(t.minutes):0,o=t.seconds?Object(I.a)(t.seconds):0,l=Object(E.a)(e),u=a||n?Object(A.a)(l,a+12*n):l,d=i||r?Object(C.a)(u,i+7*r):u,j=s+60*c,b=o+60*j,f=1e3*b,p=new Date(d.getTime()+f);return p}var F=n(125),L=n(246),_=n(251),B=n(389),z=n(8),R=Object(u.a)((function(e){return Object(d.a)({createForm:{minWidth:400},dateRange:{display:"flex",justifyContent:"space-between","& > *":{width:"47%"}},boldButton:{fontWeight:e.typography.fontWeightBold}})})),D=function(e){var t=e.openState,n=e.eventsQueryResult,r=R(),i=Object(y.a)().formatMessage,s=Object(F.b)().enqueueSnackbar,o=Object(a.a)(t,2),u=o[0],d=o[1],f=Object(b.g)(),C=Object(a.a)(f,2),A=C[0],E=C[1],S=E.data,I=E.loading,D=Object(b.i)(),T=Object(a.a)(D,2),H=T[0],P=T[1].loading,W=function(){n.refetch(),d(!1)};return Object(z.jsx)(O.a,{open:u,children:Object(z.jsx)(w.c,{initialValues:{name:"",code:"",startAt:new Date,endAt:N(new Date,{days:4})},validate:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a,r,c,s,o,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.code,r=t.startAt,c=t.endAt,e.prev=1,e.next=4,M.b({name:M.c().max(L.d).required(),code:M.c().max(L.c).required(),startAt:M.a(),endAt:M.a()}).validate({name:n,code:a,startAt:r,endAt:c});case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),s=e.t0,o=s.path,l=s.errors,console.error(o,l),e.abrupt("return",Object(v.a)({},o,l[0]));case 11:if(!(c<r)){e.next=13;break}return e.abrupt("return",{endAt:i({id:"End_must_after_start",defaultMessage:"End must after start"})});case 13:return e.next=15,A({variables:{code:a}});case 15:if(!(null===S||void 0===S?void 0:S.checkEventCodeExist)){e.next=17;break}return e.abrupt("return",{code:i({id:"Code_existed",defaultMessage:"Code existed"})});case 17:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),onSubmit:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H({variables:t});case 2:n=e.sent,n.data&&(s(i({id:"Event_created",defaultMessage:"Event created"}),{variant:"success"}),W());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(z.jsxs)(w.b,{className:r.createForm,children:[Object(z.jsx)(m.a,{children:Object(z.jsx)(j.a,{id:"Create_event",defaultMessage:"Create event"})}),Object(z.jsxs)(x.a,{children:[Object(z.jsx)(w.a,{component:_.c,autoFocus:!0,fullWidth:!0,name:"name",label:i({id:"Event_name",defaultMessage:"Event name"}),margin:"normal"}),Object(z.jsxs)(c.a,{className:r.dateRange,children:[Object(z.jsx)(w.a,{component:B.a,name:"startAt",label:i({id:"Start_datetime",defaultMessage:"Start date time"}),variant:"inline",margin:"normal",autoOk:!0,disableToolbar:!0}),Object(z.jsx)(w.a,{component:B.a,name:"endAt",label:i({id:"End_datetime",defaultMessage:"End date time"}),variant:"inline",margin:"normal",autoOk:!0,disableToolbar:!0})]}),Object(z.jsx)(w.a,{component:_.c,fullWidth:!0,name:"code",label:i({id:"Event_code",defaultMessage:"Event code"}),margin:"normal"})]}),Object(z.jsxs)(g.a,{children:[Object(z.jsx)(l.a,{onClick:W,children:Object(z.jsx)(j.a,{id:"Cancel",defaultMessage:"Cancel"})}),Object(z.jsx)(k.a,{className:r.boldButton,type:"submit",color:"primary",disabled:P||I,loading:P||I,children:Object(z.jsx)(j.a,{id:"Create",defaultMessage:"Create"})})]})]})})})},T=n(45),H=n(116),P=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function W(e,t){return function(){var n=arguments.length;if(0===n)return t();var a=arguments[n-1];return P(a)||"function"!==typeof a[e]?t.apply(this,arguments):a[e].apply(a,Array.prototype.slice.call(arguments,0,n-1))}}var V=n(57);var G=n(301);function q(e,t,n,a){var r,i=function(r){for(var i=t.length,c=0;c<i;){if(e===t[c])return n[c];c+=1}for(var s in t[c+1]=e,n[c+1]=r,e)r[s]=a?q(e[s],t,n,!0):e[s];return r};switch(Object(G.a)(e)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(e.valueOf());case"RegExp":return r=e,new RegExp(r.source,(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.sticky?"y":"")+(r.unicode?"u":""));default:return e}}function U(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,a){return t.apply(this,arguments)};case 4:return function(e,n,a,r){return t.apply(this,arguments)};case 5:return function(e,n,a,r,i){return t.apply(this,arguments)};case 6:return function(e,n,a,r,i,c){return t.apply(this,arguments)};case 7:return function(e,n,a,r,i,c,s){return t.apply(this,arguments)};case 8:return function(e,n,a,r,i,c,s,o){return t.apply(this,arguments)};case 9:return function(e,n,a,r,i,c,s,o,l){return t.apply(this,arguments)};case 10:return function(e,n,a,r,i,c,s,o,l,u){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var Q=n(14);function K(e,t,n){return function(){for(var a=[],r=0,i=e,c=0;c<t.length||r<arguments.length;){var s;c<t.length&&(!Object(Q.a)(t[c])||r>=arguments.length)?s=t[c]:(s=arguments[r],r+=1),a[c]=s,Object(Q.a)(s)||(i-=1),c+=1}return i<=0?n.apply(this,a):U(i,K(e,a,n))}}function Y(e){return null!=e&&"function"===typeof e["@@transducer/step"]}function J(e,t,n){return function(){if(0===arguments.length)return n();var a=Array.prototype.slice.call(arguments,0),r=a.pop();if(!P(r)){for(var i=0;i<e.length;){if("function"===typeof r[e[i]])return r[e[i]].apply(r,a);i+=1}if(Y(r)){var c=t.apply(null,a);return c(r)}}return n.apply(this,arguments)}}var X=n(265),Z=n(46),$=n(288),ee=Object(Z.a)((function(e){return!!P(e)||!!e&&("object"===typeof e&&(!Object($.a)(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))})),te=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();var ne=Object(V.a)((function(e,t){return U(e.length,(function(){return e.apply(t,arguments)}))}));function ae(e,t,n){for(var a=n.next();!a.done;){if((t=e["@@transducer/step"](t,a.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}a=n.next()}return e["@@transducer/result"](t)}function re(e,t,n,a){return e["@@transducer/result"](n[a](ne(e["@@transducer/step"],e),t))}var ie="undefined"!==typeof Symbol?Symbol.iterator:"@@iterator";function ce(e,t,n){if("function"===typeof e&&(e=function(e){return new te(e)}(e)),ee(n))return function(e,t,n){for(var a=0,r=n.length;a<r;){if((t=e["@@transducer/step"](t,n[a]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}a+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"===typeof n["fantasy-land/reduce"])return re(e,t,n,"fantasy-land/reduce");if(null!=n[ie])return ae(e,t,n[ie]());if("function"===typeof n.next)return ae(e,t,n);if("function"===typeof n.reduce)return re(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var se=function(){return this.xf["@@transducer/init"]()},oe=function(){function e(e,t,n,a){this.valueFn=e,this.valueAcc=t,this.keyFn=n,this.xf=a,this.inputs={}}return e.prototype["@@transducer/init"]=se,e.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if(Object(X.a)(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]))["@@transducer/reduced"]){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n=this.keyFn(t);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],t),e},e}(),le=K(4,[],J([],K(4,[],(function(e,t,n,a){return new oe(e,t,n,a)})),(function(e,t,n,a){return ce((function(a,r){var i=n(r);return a[i]=e(Object(X.a)(i,a)?a[i]:q(t,[],[],!1),r),a}),{},a)}))),ue=Object(V.a)(W("groupBy",le((function(e,t){return null==e&&(e=[]),e.push(t),e}),null))),de=n(632),je=n(565),be=n(387),fe=n(270),pe=n(18),ve=n(272),he=n(373),Oe=n(425),me=n(388),xe=n(374),ge=n(461),ye=n(5),we=n(16),Me=(n(22),n(38)),ke=n(51),Ce=r.forwardRef((function(e,t){var n=e.classes,a=e.className,i=Object(we.a)(e,["classes","className"]);return r.createElement("div",Object(ye.a)({className:Object(Me.a)(n.root,a),ref:t},i))}));Ce.muiName="ListItemSecondaryAction";var Ae=Object(ke.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(Ce),Ee=n(636),Se=n(196),Ie=n(433),Ne=n.n(Ie),Fe=n(432),Le=n.n(Fe),_e=n(567),Be=n.n(_e),ze=n(566),Re=n.n(ze),De=n(568),Te=n.n(De),He=n(569),Pe=n.n(He),We=Object(u.a)((function(e){return Object(d.a)({listItem:{"& .actionHover":{display:"none"},"&:hover .actionHover":{display:"inline-flex"}},code:{marginLeft:e.spacing(2)},actionHoverIcon:{fontSize:e.typography.pxToRem(18),color:e.palette.action.disabled}})})),Ve=function(e){var t=e.event,n=e.moreMenuState,a=We(),c=Object(pe.g)();return Object(z.jsx)(he.a,{button:!0,divider:!0,className:a.listItem,onClick:function(){c.push("/admin/event/".concat(t.id))},children:Object(z.jsxs)(i.a.Fragment,{children:[Object(z.jsx)(Oe.a,{children:Object(z.jsx)(me.a,{children:t.dateStatus===b.a.Active?Object(z.jsx)(Re.a,{}):t.dateStatus===b.a.Upcoming?Object(z.jsx)(Be.a,{}):Object(z.jsx)(Te.a,{})})}),Object(z.jsx)(xe.a,{primary:Object(z.jsxs)(r.Fragment,{children:[Object(z.jsx)(ge.a,{color:"inherit",display:"inline",children:t.name}),Object(z.jsxs)(ge.a,{className:a.code,color:"textSecondary",display:"inline",children:["# ",t.code]})]}),secondary:Object(z.jsxs)(i.a.Fragment,{children:[Object(z.jsx)(Se.a,{value:t.startAt}),", ",Object(z.jsx)(Se.b,{value:t.startAt})," ~ ",Object(z.jsx)(Se.a,{value:t.endAt}),", ",Object(z.jsx)(Se.b,{value:t.endAt})]})}),Object(z.jsxs)(Ae,{children:[Object(z.jsx)(Ee.a,{className:"actionHover",onClick:function(e){return function(e,t){e.stopPropagation(),window.open("/event/".concat(t))}(e,t.id)},children:Object(z.jsx)(Le.a,{className:a.actionHoverIcon})}),Object(z.jsx)(Ee.a,{className:"actionHover",onClick:function(e){return function(e,t){e.stopPropagation(),window.open("/event/".concat(t,"/wall"))}(e,t.id)},children:Object(z.jsx)(Ne.a,{className:a.actionHoverIcon})}),Object(z.jsx)(Ee.a,{onClick:function(e){return function(e,t){e.stopPropagation(),n[1]({anchorEl:e.currentTarget,id:t})}(e,t.id)},children:Object(z.jsx)(Pe.a,{})})]})]})})},Ge=n(385),qe=n(268),Ue=["children"],Qe=Object(u.a)((function(e){return Object(d.a)({eventList:{margin:e.spacing(2,0),flex:1,overflow:"hidden"},listGroup:{color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold,backgroundColor:e.palette.primary.main}})})),Ke=function(e){var t=e.eventsByMeQueryResult,n=Qe(),r=Object(pe.g)(),c=t.data,s=t.loading,l=t.refetch,u=t.fetchMore,d=i.a.useState({anchorEl:null,id:""}),f=i.a.useState({open:!1,id:""}),v=Object(a.a)(f,2),O=v[0],m=v[1],x=i.a.useState(""),g=Object(b.m)(),y=Object(a.a)(g,1)[0],w=function(){d[1]({anchorEl:null,id:""})},M=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({variables:{eventId:O.id}});case 2:l(),m({open:!1,id:""});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=i.a.useMemo((function(){var e=ue((function(e){return e.dateStatus}))((null===c||void 0===c?void 0:c.eventsByMe.list)||[]);return{groupKeys:Object.keys(e),groupCounts:Object.values(e).map((function(e){return e.length}))}}),[c]),C=k.groupKeys,A=k.groupCounts,E=[{text:Object(z.jsx)(j.a,{id:"Open",defaultMessage:"Open"}),onClick:function(e){r.push("/admin/event/".concat(d[0].id))}},{text:Object(z.jsx)(j.a,{id:"Setting",defaultMessage:"Setting"}),onClick:function(e){x[1](d[0].id),w()}},{disabled:!0,text:Object(z.jsx)(j.a,{id:"Share_access",defaultMessage:"Share access"}),onClick:function(e){}},{disabled:!0,text:Object(z.jsx)(j.a,{id:"Duplicate",defaultMessage:"Duplicate"}),onClick:function(e){}},{disabled:!0,text:Object(z.jsx)(j.a,{id:"Transfer",defaultMessage:"Transfer"}),onClick:function(e){}},{text:Object(z.jsx)(j.a,{id:"Delete",defaultMessage:"Delete"}),onClick:function(e){var t;t=d[0].id,m({open:!0,id:t}),w()}}];return Object(z.jsxs)(i.a.Fragment,{children:[Object(z.jsx)(de.a,{className:n.eventList,children:Object(z.jsx)(fe.a,{style:{height:"100%",width:"100%"},groupCounts:A,endReached:function(){(null===c||void 0===c?void 0:c.eventsByMe.hasNextPage)&&u({variables:{pagination:{offset:(null===c||void 0===c?void 0:c.eventsByMe.list.length)||L.b,limit:(null===c||void 0===c?void 0:c.eventsByMe.limit)||L.a}}})},components:{Group:function(e){var t=e.children,a=Object(H.a)(e,Ue);return Object(z.jsx)(je.a,Object(T.a)(Object(T.a)({},a),{},{className:n.listGroup,children:t}))},Footer:function(){return Object(z.jsx)(qe.a,{loading:s,hasNextPage:null===c||void 0===c?void 0:c.eventsByMe.hasNextPage})}},groupContent:function(e){return Xe(C[e])},itemContent:function(e){var t=null===c||void 0===c?void 0:c.eventsByMe.list[e];return t?Object(z.jsx)(Ve,{event:t,moreMenuState:d}):Object(z.jsx)("div",{})}})}),Object(z.jsx)(be.a,{MenuListProps:{dense:!0},anchorEl:d[0].anchorEl,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(d[0].anchorEl),onClose:w,children:E.map((function(e,t){return Object(z.jsx)(o.a,{disabled:e.disabled,onClick:e.onClick,children:e.text},t)}))}),Object(z.jsx)(ve.a,{open:O.open,contentText:Object(z.jsx)(j.a,{id:"Delete_this_event?",defaultMessage:"Delete this event?"}),okText:Object(z.jsx)(j.a,{id:"Delete",defaultMessage:"Delete"}),onCancel:function(){m({open:!1,id:""})},onOk:M}),Object(z.jsx)(Ge.a,{eventIdState:x})]})},Ye=Object(u.a)((function(e){return Object(d.a)({eventsBox:{display:"flex",flexDirection:"column",height:"100%"},actionBox:{display:"flex",justifyContent:"flex-end"},actionField:{marginLeft:e.spacing(2),"&.ownerFilter":{width:80},"&.eventDateFilter":{width:120}}})})),Je=function(e){switch(e){case b.b.Owner:return Object(z.jsx)(j.a,{id:"Owner",defaultMessage:"Owner"});case b.b.Guest:return Object(z.jsx)(j.a,{id:"Guest",defaultMessage:"Guest"});default:return Object(z.jsx)(j.a,{id:"All",defaultMessage:"All"})}},Xe=function(e){switch(e){case b.a.Active:return Object(z.jsx)(j.a,{id:"Active",defaultMessage:"Active"});case b.a.Upcoming:return Object(z.jsx)(j.a,{id:"Upcoming",defaultMessage:"Upcoming"});case b.a.Past:return Object(z.jsx)(j.a,{id:"Past",defaultMessage:"Past"});default:return Object(z.jsx)(j.a,{id:"All",defaultMessage:"All"})}};t.default=function(e){var t=e.searchString,n=Ye(),r=i.a.useState(!1),u=i.a.useState("ALL"),d=Object(a.a)(u,2),f=d[0],p=d[1],v=i.a.useState("ALL"),h=Object(a.a)(v,2),O=h[0],m=h[1],x=Object(b.s)({variables:{searchString:t,eventOwnerFilter:"ALL"!==f?f:void 0,dateStatusFilter:"ALL"!==O?O:void 0,pagination:{limit:L.a,offset:L.b}}});return Object(z.jsxs)(c.a,{className:n.eventsBox,children:[Object(z.jsxs)(c.a,{className:n.actionBox,children:[Object(z.jsx)(s.a,{className:n.actionField+" ownerFilter",value:f,onChange:function(e){p(e.target.value)},children:["ALL"].concat(Object.values(b.b)).map((function(e,t){return Object(z.jsx)(o.a,{value:e,children:Je(e)},t)}))}),Object(z.jsx)(s.a,{className:n.actionField+" eventDateFilter",value:O,onChange:function(e){m(e.target.value)},children:["ALL"].concat(Object.values(b.a)).map((function(e,t){return Object(z.jsx)(o.a,{value:e,children:Xe(e)},t)}))}),Object(z.jsx)(l.a,{className:n.actionField,variant:"contained",color:"primary",onClick:function(){r[1](!0)},children:Object(z.jsx)(j.a,{id:"CREATE_EVENT",defaultMessage:"Create Event"})})]}),Object(z.jsx)(Ke,{eventsByMeQueryResult:x}),Object(z.jsx)(D,{openState:r,eventsQueryResult:x})]})}}}]);
//# sourceMappingURL=19.4e805ff6.chunk.js.map